<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatchPet - Encuentra tu CompaÃ±ero</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="search.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-logo">
            <div class="logo-box">
                <img src="../assets/MatchPet-LogoNombre.png" alt="MatchPet Logo" class="logo-image">
                </div>
        </div>
        
        <div class="navbar-nav">
            <button class="btn-search" id="btn-buscar-mascota">
                <i class="fa-solid fa-magnifying-glass"></i>
                Buscar Mascota
            </button>
            
            <button class="nav-link" id="btn-ir-a-register">
                <i class="fa-solid fa-cloud-arrow-up"></i>
                <span>Publicar</span>
            </button>
            
            <button class="nav-link" id="btn-ir-a-mi-perfil">
                <i class="fa-solid fa-user"></i>
                <span>Mi Perfil</span>
            </button>

            <button class="nav-link" id="btn-cerrar-sesion">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Cerrar SesiÃ³n</span>
            </button>
        </div>
    </nav>

    <div class="search-container">
        <h1>Â¡Encuentra a tu CompaÃ±ero Ideal! <i class="fa-solid fa-paw" style="color: var(--secondary);"></i></h1>
        <p class="subtitle">Usa los filtros para encontrar a tu match perfecto</p>
        
        <div class="search-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="name-input">Nombre</label>
                    <input type="text" id="name-input" placeholder="Buscar por nombre..." class="custom-input">
                </div>
                <div class="form-group">
                    <label for="species-select">Especie</label>
                    <select id="species-select" class="custom-input">
                        <option value="todos" selected>Todas</option>
                        <option value="perro">Perro</option>
                        <option value="gato">Gato</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="breed-input">Raza</label>
                    <input type="text" id="breed-input" placeholder="Ej: Labrador..." class="custom-input">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="sex-select">Sexo</label>
                    <select id="sex-select" class="custom-input">
                        <option value="todos" selected>Todos</option>
                        <option value="M">Macho</option>
                        <option value="H">Hembra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="age-select">Edad</label>
                    <select id="age-select" class="custom-input">
                        <option value="todos" selected>Todas las edades</option>
                        <option value="0-1">0-1 aÃ±o</option>
                        <option value="1-5">1-5 aÃ±os</option>
                        <option value="5+">+5 aÃ±os</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button class="search-button" id="search-btn"><i class="fa-solid fa-magnifying-glass"></i> Buscar</button>
                    <button class="clear-button" id="clear-btn"><i class="fa-solid fa-rotate-left"></i> Limpiar</button>
                </div>
            </div>
        </div>

<div id="searchResults" style="display: none;">
    <p class="pet-count" id="petCount">6 mascotas encontradas</p>
    <h2 class="results-title">Resultados de BÃºsqueda</h2>
    
    <div class="results-grid" id="resultsGrid">
        </div>
</div>
    </div>

    <template id="pet-card-template">
        <div class="pet-card">
            <div class="pet-image-container">
                <img src="" alt="">
                <span class="species-tag">Perro</span>
            </div>
            <div class="pet-content">
                <h3>Max</h3>
                <p class="pet-info-line">Golden Retriever â€¢ Macho</p>
                <p class="pet-info-line age">2 aÃ±os</p>
                <p class="pet-description">SÃºper juguetÃ³n y amigable, le encanta nadar y jugar a buscar la pelota. Ideal para...</p>
                <div class="card-actions">
                    <button class="match-button">
                        <i class="fa-solid fa-heart"></i> Â¡Match!
                    </button>
                    <button class="info-button">
                        <i class="fa-solid fa-circle-info"></i>
                    </button>
                </div>
            </div>
        </div>
    </template>

    <script type="module">
        import buscar from './search.js';
        
        function renderPetCard(name, breed, age, description, imageSrc, specie) {
            const template = document.getElementById('pet-card-template');
            const card = template.content.cloneNode(true);
            
            card.querySelector('h3').textContent = name;
            card.querySelector('.pet-info-line:nth-child(2)').textContent = breed;
            card.querySelector('.age').textContent = age;
            card.querySelector('.pet-description').textContent = description;
            card.querySelector('img').src = imageSrc;
            card.querySelector('img').alt = name;
            card.querySelector('.species-tag').textContent = specie;
            
            return card;
        }

        function displayInitialResults() {
             const resultsGrid = document.getElementById('resultsGrid');
             resultsGrid.innerHTML = '';
             
             // SimulaciÃ³n de resultados fijos
             resultsGrid.appendChild(renderPetCard('Max', 'Golden Retriever â€¢ Macho', '2 aÃ±os', 'SÃºper juguetÃ³n y amigable, le encanta nadar y jugar a buscar la pelota. Ideal para...', '../assets/Max-pet.png', 'Perro'));
             resultsGrid.appendChild(renderPetCard('Luna', 'Mestizo â€¢ Hembra', '1 aÃ±o', 'Tranquila y cariÃ±osa, perfecta para apartamento. Le gusta acurrucarse en el...', '../assets/Luna-pet.png', 'Gato')); 
             resultsGrid.appendChild(renderPetCard('Rocky', 'Beagle â€¢ Macho', '3 aÃ±os', 'Curioso y aventurero, excelente compaÃ±ero para caminatas largas. Muy sociable con...', '../assets/Rocky-pet.png', 'Perro'));
        }

        document.addEventListener('DOMContentLoaded', () => {
            displayInitialResults(); 

            // Manejador del botÃ³n de bÃºsqueda
            document.getElementById('search-btn').addEventListener('click', () => {
                const searchResults = document.getElementById('searchResults');
                const resultsGrid = document.getElementById('resultsGrid');
                const searchValue = document.getElementById('breed-input').value; 
                
                resultsGrid.innerHTML = '';
                searchResults.style.display = 'block';

                try {
                    const result = buscar(searchValue);
                    
                    if (result === 'Â¡Mascota No Encontrada!') {
                        resultsGrid.innerHTML = `
                            <div class="no-results">
                                <p class="not-found-message">Mascotas no disponibles ðŸ˜ž</p> 
                                <p>Intenta con otros criterios de bÃºsqueda</p>
                            </div>`;
                        document.getElementById('petCount').textContent = '0 mascotas encontradas';
                    } else {
                        displayInitialResults();
                        document.getElementById('petCount').textContent = '3 mascotas encontradas';
                    }
                } catch (error) {
                    console.error("Error inesperado durante la bÃºsqueda:", error);
                    resultsGrid.innerHTML = `<div class="no-results"><p class="not-found-message">OcurriÃ³ un error en el sistema. ðŸ˜”</p><p>Revisa la consola para mÃ¡s detalles.</p></div>`;
                    document.getElementById('petCount').textContent = '0 mascotas encontradas';
                }
            });

            // Manejador del botÃ³n Limpiar
             document.getElementById('clear-btn').addEventListener('click', () => {
                document.getElementById('name-input').value = '';
                document.getElementById('breed-input').value = '';
                document.getElementById('species-select').value = 'todos';
                document.getElementById('sex-select').value = 'todos';
                document.getElementById('age-select').value = 'todos';
                
                displayInitialResults();
                document.getElementById('petCount').textContent = '6 mascotas encontradas';
            });

            // Manejador para los botones de Match (Mantenido)
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('match-button')) {
                    const petName = e.target.closest('.pet-card').querySelector('h3').textContent;
                    alert(`Â¡Has hecho match con ${petName}! Te contactaremos pronto.`);
                }
            });
        });
    </script>
</body>
</html>